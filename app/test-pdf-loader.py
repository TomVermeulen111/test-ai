from coman import PDFLoader
from langchain_community.document_loaders import PyPDFLoader
from langchain.text_splitter import RecursiveCharacterTextSplitter
import re

# Test "Samenstellen van een stevig verhuurdossier"
# loader = PDFLoader.PDFLoader("https://file.immo-connect.be/Document?token=4CSCx7yg3j7yTo6soBwgutDvpIr8FzecwWabg1j4ppgHCMYR%2BMFblTpJKATlGvFCouwKG44ie6Dbum1%2FCp20mvOoAPZBOgLr4JXT%2FUwUPp62cRt9dysEYsctlOZw6FPS9zruHuGjJPPawY2nXib8nuXL2Iz6Yz8Y1ZH81nLZqaFXimvKwvFRA0BgKeuKlayoXuE852FHuuiLTGhVKDujva6KUEwNPuJ2XAeVeXyaylNuOgUtHINDnWqX2A4NJ8%2Bi0Ht16Vqvo535Id1PnJkL1do%2Fl7qVIQpxClyUjBixt77Aj7WmhpeMiHSaRwmnDBORJe34QeqTmaJ5tSfNehYFSh4FQdWNSi3pfdX0iDDFyLXXB8PGG2Yv8XEGqeKT615ybjoFLRyDQ53aP5e6lSEKcXEGqeKT615yqSjQ8qLait100caHsPuecKUu4nA1NHpeepAaYWR21r5lUQSdSKYMxLS5JL4g9aNXMTFAVs5j6RCA%2F6p3Rv4rf3QmCc%2F3k%2B4%2BMdwZCw6f0F8rw9L5CHXQ7DuQI9Vfq0z5dCYJz%2FeT7j6FokOTMiDMqiYv66PilPXu")

# loader = PyPDFLoader("https://file.immo-connect.be/Document?token=4CSCx7yg3j7yTo6soBwgutDvpIr8FzecwWabg1j4ppgHCMYR%2BMFblTpJKATlGvFCouwKG44ie6Dbum1%2FCp20mvOoAPZBOgLr4JXT%2FUwUPp62cRt9dysEYsctlOZw6FPS9zruHuGjJPPawY2nXib8nuXL2Iz6Yz8Y1ZH81nLZqaFXimvKwvFRA0BgKeuKlayoXuE852FHuuiLTGhVKDujva6KUEwNPuJ2XAeVeXyaylNuOgUtHINDnWqX2A4NJ8%2Bi0Ht16Vqvo535Id1PnJkL1do%2Fl7qVIQpxClyUjBixt77Aj7WmhpeMiHSaRwmnDBORJe34QeqTmaJ5tSfNehYFSh4FQdWNSi3pfdX0iDDFyLXXB8PGG2Yv8XEGqeKT615ybjoFLRyDQ53aP5e6lSEKcXEGqeKT615yqSjQ8qLait100caHsPuecKUu4nA1NHpeepAaYWR21r5lUQSdSKYMxLS5JL4g9aNXMTFAVs5j6RCA%2F6p3Rv4rf3QmCc%2F3k%2B4%2BMdwZCw6f0F8rw9L5CHXQ7DuQI9Vfq0z5dCYJz%2FeT7j6FokOTMiDMqiYv66PilPXu")
# loader = PyPDFLoader("https://file.immo-connect.be/Document?token=4CSCx7yg3j7yTo6soBwgutDvpIr8FzecwWabg1j4ppgHCMYR%2BMFblTpJKATlGvFCouwKG44ie6CATAg9Of8ei%2FOoAPZBOgLr4JXT%2FUwUPp62cRt9dysEYnT7rTHN3IS8DPvq0EfAwprRKIziYOeaBnbF70SR3xWIAisqBg%2FpLWt17hKc7i7ZJTJeHIknMTzdWu%2ByZxMX7hqLTGhVKDujva6KUEwNPuJ2XAeVeXyaylNuOgUtHINDnWqX2A4NJ8%2Bi0Ht16Vqvo535Id1PnJkL1do%2Fl7qVIQpxClyUjBixt77Aj7WmhpeMiHSaRwmnDBORJe34QeqTmaJ5tSfNehYFSh4FQdWNSi3pfdX0iDDFyLXXB8PGG2Yv8XEGqeKT615ybjoFLRyDQ53aP5e6lSEKcXEGqeKT615yoIlMzhb0hQOXYAUxTeCmCZEL0XEuAmBXl2uQgVtJl%2FZYtcm5bTxM6UDyMlHJwLJOMTFAVs5j6RCA%2F6p3Rv4rf3QmCc%2F3k%2B4%2BMdwZCw6f0F8rw9L5CHXQ7DuQI9Vfq0z5dCYJz%2FeT7j6FokOTMiDMqo9iV2QhPXWc", extract_images=True)
loader = PDFLoader.PDFLoader("https://file.immo-connect.be/Document?token=4CSCx7yg3j7yTo6soBwgutDvpIr8FzecwWabg1j4ppgHCMYR%2BMFblTpJKATlGvFCouwKG44ie6Dbum1%2FCp20mvOoAPZBOgLr4JXT%2FUwUPp62cRt9dysEYsctlOZw6FPS9zruHuGjJPPawY2nXib8nuXL2Iz6Yz8Y1ZH81nLZqaFXimvKwvFRA0BgKeuKlayoXuE852FHuuiLTGhVKDujva6KUEwNPuJ2XAeVeXyaylNuOgUtHINDnWqX2A4NJ8%2Bi0Ht16Vqvo535Id1PnJkL1do%2Fl7qVIQpxClyUjBixt77Aj7WmhpeMiHSaRwmnDBORJe34QeqTmaJ5tSfNehYFSh4FQdWNSi3pfdX0iDDFyLXXB8PGG2Yv8XEGqeKT615ybjoFLRyDQ53aP5e6lSEKcXEGqeKT615yqSjQ8qLait100caHsPuecKUu4nA1NHpeepAaYWR21r5lUQSdSKYMxLS5JL4g9aNXMTFAVs5j6RCA%2F6p3Rv4rf3QmCc%2F3k%2B4%2BMdwZCw6f0F8rw9L5CHXQ7DuQI9Vfq0z5dCYJz%2FeT7j6FokOTMiDMqiYv66PilPXu", '1', 'documenttest', 'File')
docs = loader.lazy_load()
print(docs)

print(len(docs))

# Test "Vastgoedmakelaar past verkeerd fiscaal regime toe, opdrachtgever eist schadevergoeding"
# loader = PDFLoader.PDFLoader("https://file.immo-connect.be/Document?token=4CSCx7yg3j7yTo6soBwgutDvpIr8FzecwWabg1j4ppgHCMYR%2BMFblTpJKATlGvFCouwKG44ie6CATAg9Of8ei%2FOoAPZBOgLr4JXT%2FUwUPp62cRt9dysEYnT7rTHN3IS8DPvq0EfAwprRKIziYOeaBnbF70SR3xWIAisqBg%2FpLWt17hKc7i7ZJTJeHIknMTzdWu%2ByZxMX7hqLTGhVKDujva6KUEwNPuJ2XAeVeXyaylNuOgUtHINDnWqX2A4NJ8%2Bi0Ht16Vqvo535Id1PnJkL1do%2Fl7qVIQpxClyUjBixt77Aj7WmhpeMiHSaRwmnDBORJe34QeqTmaJ5tSfNehYFSh4FQdWNSi3pfdX0iDDFyLXXB8PGG2Yv8XEGqeKT615ybjoFLRyDQ53aP5e6lSEKcXEGqeKT615yoIlMzhb0hQOXYAUxTeCmCZEL0XEuAmBXl2uQgVtJl%2FZYtcm5bTxM6UDyMlHJwLJOMTFAVs5j6RCA%2F6p3Rv4rf3QmCc%2F3k%2B4%2BMdwZCw6f0F8rw9L5CHXQ7DuQI9Vfq0z5dCYJz%2FeT7j6FokOTMiDMqo9iV2QhPXWc")

# docs = loader.lazy_load()
# print(docs)

# screenshot pdf: https://dev-file.immo-connect.be/Document?token=4CSCx7yg3j7yTo6soBwgutDvpIr8FzecwWabg1j4ppgHCMYR%2BMFblTpJKATlGvFCouwKG44ie6CATAg9Of8ei%2FOoAPZBOgLr4JXT%2FUwUPp62cRt9dysEYnT7rTHN3IS8DPvq0EfAwprRKIziYOeaBnbF70SR3xWIAisqBg%2FpLWt17hKc7i7ZJTJeHIknMTzdWu%2ByZxMX7hqLTGhVKDujva6KUEwNPuJ2XAeVeXyaylNuOgUtHINDnWqX2A4NJ8%2Bi0Ht16Vqvo535Id1PnJkL1do%2Fl7qVIQpxClyUjBixt77Aj7WmhpeMiHSaRwmnDBORJe34QeqTmaJ5tSfNehYFSh4FQdWNSi3pfdX0iDDFyLXXB8PGG2Yv8XEGqeKT615ybjoFLRyDQ53aP5e6lSEKcXEGqeKT615ybrlAfGwSn%2Fxu8XNNRuvy4s50IQANAd46gNiS6i1MS3bVkDaYX0PFMlqxLXQkqoTlMTFAVs5j6RCA%2F6p3Rv4rf3QmCc%2F3k%2B4%2BMdwZCw6f0F8rw9L5CHXQ7DuQI9Vfq0z5dCYJz%2FeT7j6FokOTMiDMqkA7DgQTiJwD